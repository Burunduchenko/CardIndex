<table class="table table-striped table-dark">
    <thead>
      <tr>
        <th scope="col">First Name</th>
        <th scope="col">Last Name</th>
        <th scope="col">Login</th>
        <th scope="col">Email</th>
        <th scope="col">Phone Number</th>
        <th scope="col">Roles</th>
        <th></th>

      </tr>
    </thead>
    <tbody *ngFor = "let user of _allUsers">

      <tr>
        <ng-template [ngIf]="update_User?.id != user.id" [ngIfElse]="UpdateUser">
            <td>{{user.firstName}}</td>
            <td>{{user.lastName}}</td>
            <td>{{user.login}}</td>
            <td>{{user.email}}</td>
            <td>{{user.phoneNumber}}</td>
            <td>{{user.roles}}</td>
            <td>
                <button class="btn  btn-primary" (click) = "updateUser(user)"><i class="bi bi-vector-pen"></i></button>
                <button class="btn  btn-danger" (click) = "deleteUser(user)"><i class="bi bi-trash"></i></button>
            </td>
        </ng-template>
      </tr>
    </tbody>
  </table>


  
<ng-template #UpdateUser>
        <td><input type="text" [(ngModel)]="update_User.firstName" class="form-control" /></td>
        <td><input type="text" [(ngModel)]="update_User.lastName" class="form-control" /></td>
        <td></td>
        <td><input type="text" [(ngModel)]="update_User.phoneNumber" class="form-control" /></td>
        <td><input type="text" [(ngModel)]="update_User.email" class="form-control" /></td>
        <td></td>
        <td>
            <button (click)="saveUpdate()" class="btn btn-success"><i class="bi bi-bookmark-check"></i></button>
            <button (click)="cancel()" class="btn btn-warning"><i class="bi bi-bookmark-x"></i></button>
        </td>   
</ng-template>


<div id="mySidenav" class="sidenav">
  <button class="btn btn-primary" (click) = "takeUserFromRole()">Take user from role</button>

  <div *ngIf = "takeAwayMode">
    <br>
    <div class="form-group">
        <input type="text" [(ngModel)]="asignUserToRole.email" class="form-control" placeholder="user email"/>
    </div>
    <div class="form-group">
        <input type="text" [(ngModel)]="asignUserToRole.role" class="form-control" placeholder="roles"/>
    </div> 
    <div>
        <button (click)="saveTakeAway()" class="btn btn-success " ><i class="bi bi-bookmark-check"></i></button>
        <button (click)="cancelTakeAway()" class="btn btn-warning leftbutton"><i class="bi bi-bookmark-x"></i></button>
    </div>
  </div>
  <br>
  <br>
  <button class="btn btn-primary" (click) = "provideUserToRole()">Provide user to role</button>
  <br>
  <div *ngIf = "provideMode">
    <div class="form-group">
        <input type="text" [(ngModel)]="asignUserToRole.email" class="form-control" placeholder="user email"/>
    </div>
    <div class="form-group">
        <input type="text" [(ngModel)]="asignUserToRole.role" class="form-control" placeholder="roles"/>
    </div> 
    <div>
        <button (click)="saveProvide()" class="btn btn-success " ><i class="bi bi-bookmark-check"></i></button>
        <button (click)="cancelProvide()" class="btn btn-warning leftbutton"><i class="bi bi-bookmark-x"></i></button>
    </div>
  </div>
  <div *ngIf = "!addRoleMode else createRole">
    <a>
      <strong>The list of roles </strong>
      <button class="btn btn-success" (click) = "addRole()"><strong><i class="bi bi-plus-lg"></i></strong> Add</button>
    </a>
    <div *ngFor = "let role of _allRoles">
      <a>
        <button class="btn  btn-danger leftbutton" (click) = "deleteRole(role)"><i class="bi bi-trash"></i></button>
        {{role.name}}
      </a>
    </div>
  </div>
</div>


<ng-template #createRole>
  <div class="form-group">
      <input type="text" [(ngModel)]="createdRole.name" class="form-control" placeholder="Name"/>
  </div>
  <div>
      <button (click)="saveAddRole()" class="btn btn-success " ><i class="bi bi-bookmark-check"></i></button>
      <button (click)="cancel()" class="btn btn-warning leftbutton"><i class="bi bi-bookmark-x"></i></button>
  </div>
</ng-template>



